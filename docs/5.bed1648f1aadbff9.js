"use strict";(self.webpackChunkawersome_blog=self.webpackChunkawersome_blog||[]).push([[5],{3175:(f,p,i)=>{i.d(p,{N0:()=>e});var u=i(4650);const m=new u.OlP("JWT_OPTIONS");let e=(()=>{class l{constructor(t=null){this.tokenGetter=t&&t.tokenGetter||function(){}}urlBase64Decode(t){let r=t.replace(/-/g,"+").replace(/_/g,"/");switch(r.length%4){case 0:break;case 2:r+="==";break;case 3:r+="=";break;default:throw new Error("Illegal base64url string!")}return this.b64DecodeUnicode(r)}b64decode(t){let o="";if((t=String(t).replace(/=+$/,"")).length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(let a,n,s=0,_=0;n=t.charAt(_++);~n&&(a=s%4?64*a+n:n,s++%4)?o+=String.fromCharCode(255&a>>(-2*s&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return o}b64DecodeUnicode(t){return decodeURIComponent(Array.prototype.map.call(this.b64decode(t),r=>"%"+("00"+r.charCodeAt(0).toString(16)).slice(-2)).join(""))}decodeToken(t=this.tokenGetter()){return t instanceof Promise?t.then(r=>this._decodeToken(r)):this._decodeToken(t)}_decodeToken(t){if(!t||""===t)return null;const r=t.split(".");if(3!==r.length)throw new Error("The inspected token doesn't appear to be a JWT. Check to make sure it has three parts and see https://jwt.io for more.");const o=this.urlBase64Decode(r[1]);if(!o)throw new Error("Cannot decode the token.");return JSON.parse(o)}getTokenExpirationDate(t=this.tokenGetter()){return t instanceof Promise?t.then(r=>this._getTokenExpirationDate(r)):this._getTokenExpirationDate(t)}_getTokenExpirationDate(t){let r;if(r=this.decodeToken(t),!r||!r.hasOwnProperty("exp"))return null;const o=new Date(0);return o.setUTCSeconds(r.exp),o}isTokenExpired(t=this.tokenGetter(),r){return t instanceof Promise?t.then(o=>this._isTokenExpired(o,r)):this._isTokenExpired(t,r)}_isTokenExpired(t,r){if(!t||""===t)return!0;const o=this.getTokenExpirationDate(t);return r=r||0,null!==o&&!(o.valueOf()>(new Date).valueOf()+1e3*r)}getAuthScheme(t,r){return"function"==typeof t?t(r):t}}return l.\u0275fac=function(t){return new(t||l)(u.LFG(m))},l.\u0275prov=u.Yz7({token:l,factory:l.\u0275fac}),l})()},6005:(f,p,i)=>{i.d(p,{R:()=>t,l:()=>r});var u=i(433),m=i(3175),e=i(4650),d=i(384),g=i(2018),h=i(2258),l=i(6895),c=i(6323),t=(()=>{return(o=t||(t={})).HIDDEN="hidden",o.VISIBLE="visible",t;var o})();let r=(()=>{class o{constructor(a,n,_,E,v){this.formBuilder=a,this._authService=n,this.toast=_,this._router=E,this.location=v,this.submitted=!1,this.jwtHelper=new m.N0}ngOnInit(){this.init()}init(){this.loginForm=this.formBuilder.group({email:["",[u.kI.required]],password:["",[u.kI.required]]})}ShowHideSpinner(a){document.getElementById("spinner").style.visibility=a}login(){const a=this.loginForm.value;this.ShowHideSpinner(t.VISIBLE),this._authService.login(a.email,a.password).subscribe({next:n=>{if(console.log("result",n),400==n.statusCode)return this.toast.error("Email ou mot de passe incorrect !"),void this.ShowHideSpinner(t.HIDDEN);this.toast.success("Connexion r\xe9ussie !"),this.location.back(),this.ShowHideSpinner(t.HIDDEN)},error:n=>(console.log("Error",n),0==n.status?(this.toast.error("Impossible de se connecter , v\xe9rifiez votre connexion internet et r\xe9\xe9ssayez!"),void this.ShowHideSpinner(t.HIDDEN)):(this.toast.error("Une erreur est survenue , v\xe9rifiez votre connexion internet et r\xe9\xe9ssayez!"),void this.ShowHideSpinner(t.HIDDEN)))})}}return o.\u0275fac=function(a){return new(a||o)(e.Y36(u.qu),e.Y36(d.e),e.Y36(g._W),e.Y36(h.F0),e.Y36(l.Ye))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-auth-login"]],decls:55,vars:2,consts:[[1,"back-to-home","rounded","d-none","d-sm-block"],["routerLink","/",1,"btn","btn-icon","btn-soft-primary"],["name","home",1,"icons"],[1,"bg-home","d-flex","align-items-center"],[1,"container"],[1,"row","align-items-center"],[1,"col-lg-7","col-md-6"],[1,"me-lg-5"],["src","assets/images/user/login.svg","alt","",1,"img-fluid","d-block","mx-auto"],[1,"col-lg-5","col-md-6"],[1,"card","login-page","bg-white","shadow","rounded","border-0"],[1,"card-body"],[1,"card-title","text-center"],[1,"login-form","mt-4",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-lg-12"],[1,"mb-3"],[1,"form-label"],[1,"text-danger"],[1,"form-icon","position-relative"],["name","mail",1,"fea","icon-sm","icons"],["type","email","formControlName","email","placeholder","Email","name","email","required","",1,"form-control","ps-5"],["name","key",1,"fea","icon-sm","icons"],["type","password","formControlName","password","placeholder","Password","required","",1,"form-control","ps-5"],[1,"d-flex","justify-content-between"],[1,"form-check"],["type","checkbox","value","","id","flexCheckDefault",1,"form-check-input"],["for","flexCheckDefault",1,"form-check-label"],[1,"forgot-pass","mb-0"],["routerLink","/auth/re-password",1,"text-dark","fw-bold"],[1,"col-lg-12","mb-0"],[1,"d-grid"],["type","submit",1,"btn","btn-primary",3,"disabled"],["role","status","aria-hidden","true","id","spinner",1,"spinner-border","spinner-border-sm",2,"visibility","hidden"],[1,"col-12","text-center"],[1,"mb-0","mt-3"],[1,"text-dark","me-2"],["routerLink","/auth/signup",1,"text-dark","fw-bold"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0)(1,"a",1),e._UZ(2,"i-feather",2),e.qZA()(),e.TgZ(3,"section",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7),e._UZ(8,"img",8),e.qZA()(),e.TgZ(9,"div",9)(10,"div",10)(11,"div",11)(12,"h4",12),e._uU(13,"Login"),e.qZA(),e.TgZ(14,"form",13),e.NdJ("ngSubmit",function(){return n.login()}),e.TgZ(15,"div",14)(16,"div",15)(17,"div",16)(18,"label",17),e._uU(19,"Your Email "),e.TgZ(20,"span",18),e._uU(21,"*"),e.qZA()(),e.TgZ(22,"div",19),e._UZ(23,"i-feather",20)(24,"input",21),e.qZA()()(),e.TgZ(25,"div",15)(26,"div",16)(27,"label",17),e._uU(28,"Password "),e.TgZ(29,"span",18),e._uU(30,"*"),e.qZA()(),e.TgZ(31,"div",19),e._UZ(32,"i-feather",22)(33,"input",23),e.qZA()()(),e.TgZ(34,"div",15)(35,"div",24)(36,"div",16)(37,"div",25),e._UZ(38,"input",26),e.TgZ(39,"label",27),e._uU(40,"Remember me"),e.qZA()()(),e.TgZ(41,"p",28)(42,"a",29),e._uU(43,"Forgot password ?"),e.qZA()()()(),e.TgZ(44,"div",30)(45,"div",31)(46,"button",32),e._uU(47,"Sign in "),e._UZ(48,"span",33),e.qZA()()(),e.TgZ(49,"div",34)(50,"p",35)(51,"small",36),e._uU(52,"Don't have an account ?"),e.qZA(),e.TgZ(53,"a",37),e._uU(54,"Sign Up"),e.qZA()()()()()()()()()()()),2&a&&(e.xp6(14),e.Q6J("formGroup",n.loginForm),e.xp6(32),e.Q6J("disabled",n.loginForm.invalid))},dependencies:[h.rH,c.u,u._Y,u.Fj,u.JJ,u.JL,u.Q7,u.sg,u.u]}),o})()},384:(f,p,i)=>{i.d(p,{e:()=>t});var u=i(3175),m=i(2340),e=i(529),d=i(4782),g=i(8505),h=i(4004),l=i(4650),c=i(2258);let t=(()=>{class r{constructor(s,a){this.httpClient=s,this.router=a,this.host=m.N.apiUrl,this.jwtHelper=new u.N0}isAuthenticated(){const s=localStorage.getItem("blog_user");return!!s&&!this.jwtHelper.isTokenExpired(s)}get currentUser(){return localStorage.getItem("blog_user")}get decodedToken(){return this.jwtHelper.decodeToken(this.currentUser)}login(s,a){return this.httpClient.post(this.host+"/auth/login/",{email:s,password:a},{observe:"body"}).pipe((0,d.d)(1),(0,g.b)({next:n=>{console.log("response",n),localStorage.setItem("blog_user",n.data.token),console.log(this.decodedToken),console.log("Connexion r\xe9ussie !")},error:n=>{throw console.log("server error :",n),new e.UA({status:409,statusText:"An Error Occured"})}}))}register(s,a,n){return this.httpClient.post(this.host+"/auth/signup/",{email:s,password:n,username:a},{observe:"body"})}saveToken(s){return new u.N0,localStorage.setItem("blog_user",s),!0}logOut(){localStorage.removeItem("blog_user"),this.router.ngOnDestroy(),this.router.dispose(),location.href="/pages/auth/login"}getCurrentUser(s){return this.httpClient.get(`${this.host}/users/${s}/`).pipe((0,d.d)(1),(0,h.U)(a=>a.data))}}return r.\u0275fac=function(s){return new(s||r)(l.LFG(e.eN),l.LFG(c.F0))},r.\u0275prov=l.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()},4782:(f,p,i)=>{i.d(p,{d:()=>e});var u=i(4707),m=i(3099);function e(d,g,h){let l,c=!1;return d&&"object"==typeof d?({bufferSize:l=1/0,windowTime:g=1/0,refCount:c=!1,scheduler:h}=d):l=d??1/0,(0,m.B)({connector:()=>new u.t(l,g,h),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:c})}}}]);